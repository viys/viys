---
title: GD32VW553 工程模板
---

# GD32VW553 CMake 工程模板说明

> 项目链接：
> [https://github.com/viys/gd32vw553_template.git](https://github.com/viys/gd32vw553_template.git)

本工程模板适用于基于 GD32VW553 芯片的 RISC-V 嵌入式项目开发，使用 CMake 构建系统及 Nuclei 工具链。支持自动化编译、链接、生成 HEX/BIN/LST/SIZE 文件等功能。

## 📁 目录结构说明

```plaintext
.
├── CMakeLists.txt               # 主构建脚本
├── gd32vw55x.lds                # 链接脚本
├── toolchain/                   # 工具链路径（需包含 riscv-nuclei-elf 工具）
│   └── gcc/bin/
├── Firmware/                    # 厂商提供的驱动库及启动文件
│   ├── RISCV/
│   │   ├── env_Eclipse/
│   │   ├── stubs/
│   │   └── drivers/
│   └── GD32VW55x_standard_peripheral/
│       └── Include/
├── src/                         # 用户应用代码
├── inc/                         # 用户头文件
└── build/                       # 编译输出（由 CMake 自动生成）
```

## ⚙️ 工具链设置

使用 Nuclei 的 RISC-V 工具链，路径通过如下变量设置：

```cmake
set(TOOLPATH "${CMAKE_CURRENT_SOURCE_DIR}/toolchain/gcc/bin/riscv-nuclei-elf-")
```

需要配置以下工具：

- `gcc.exe`
- `g++.exe`
- `ar.exe`
- `objcopy.exe`
- `objdump.exe`
- `size.exe`

## 🚀 编译配置

- C 语言标准：C99
- C++ 标准：C++11
- 支持 ASM 汇编文件
- 使用指定 `.lds` 链接脚本
- 编译优化等级：`-O2`
- 使用节省空间的 `nano.specs` 和无系统调用 `nosys.specs`

## 📦 编译产物

构建成功后会自动生成以下文件：

- `test.elf`：可执行文件
- `test.hex`：用于烧录的 Intel HEX 文件
- `test.bin`：用于烧录的二进制文件
- `test.lst`：包含反汇编信息的 LST 文件
- `test.size`：文件大小信息

## 📄 常用命令（在构建目录）

```sh
cmake -B build -S .
cmake --build build
```

## 🛠️ CMake 特性使用

- `file(GLOB_RECURSE ...)`：自动搜索源文件
- `target_include_directories()`：添加头文件搜索路径
- `target_compile_options()`：编译器选项
- `target_link_options()`：链接器选项
- `add_custom_command()`：生成额外产物（HEX/BIN/LST/SIZE）

## 📌 注意事项

- 请确保 `toolchain` 目录存在并包含可执行工具文件。
- 链接脚本路径需与芯片型号匹配。
- 若使用不同芯片，请相应调整架构参数（如 `-march`、`-mabi` 等）。

