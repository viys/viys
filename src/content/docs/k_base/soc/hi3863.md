---
title: HI3863 环境搭建
---

# HI3863 环境搭建

使用 bearpi 提供的 sdk

## Ubuntu 环境依赖

- 默认 Shell 默认使用 bash
- cmake 3.14.1+
- python 3.8.0+
- Kconfiglib 14.1.0+
- pycparser

```shell
# Kconfiglib 和 pycparser 均可使用如下命令安装
sudo apt install python3-kconfiglib
sudo apt install python3-pycparser
sudo apt-get install python3-setuptools
sudo apt-get install python3-pip (非必须)
```

## Docker 镜像

百度网盘: https://pan.baidu.com/s/1yNYzDJvSdUSkRv3kHfVzsg?pwd=bmet

### 载入镜像

```powershell
docker load -i .\embd_hi3863V1.2.tar
```

### 运行容器

```powershell
# 首次
docker run -it --privileged --device=/dev --network host --name hi3863 embd_hi3863:v1.2
```

## 获取源码

https://gitee.com/bearpi/bearpi-pico_h3863

```shell
# 此处使用 bearpi 公开源码
git clone https://gitee.com/bearpi/bearpi-pico_h3863.git
```

## 项目编译

```shell
# 编译生成的文件在 output/ws63/ 目录下
./build.py
```

## 固件烧录

### WSL 共享 USB 设备

[WSL](https://z1eac6eifxs.feishu.cn/wiki/HEygwDADvi9H2vkZqYCcLKQonKe#share-DLgddS5fkoq3a8x0O1lcaYeAnFh)

### 获取脚本烧录

#### 项目地址

https://github.com/goodspeed34/ws63flash

#### 使用说明

```bash
WS63FLASH(1) -- Flashing Utility for Hisilicon WS63

ws63flash is a flashing utility for Hisilicon WS63 MCU developed from the
reverse engineering of Hisilicon Official BurnTool.

# Installation

For Windows, install msys2 and run the following instruction inside MSYS2 MSYS.
For GNU/Linux, run the following instruction inside a shell.

Install the prerequisites:

  # apt install autoconf automake gcc

Build and install:

  $ ./configure
  $ make
  $ sudo make install

# How to Use

Flashing a fwpkg on POSIX System (GNU/Linux, BSD...):

  $ ws63flash /dev/ttyUSB0 /path/to/fwpkg
ws
On MichaelSoft Binbows, flashing with a COM port:

  # ws63flash COM3 \path\to\fwpkg

Selective flashing, only flash `ws63-liteos-app.bin' and mandatory bin:

  $ ws63flash port /path/to/fwpkg ws63-liteos-app.bin

For more infomation, check out `ws63flash --help' and ws63flash(1).

# Resources

  * https://gitee.com/HiSpark/fbb_ws63/tree/master/src/bootloader

    Contains useful headers for return values, error values and data structures.

  * https://gitee.com/HiSpark/fbb_ws63/blob/master/tools/README.md

     Contains instruction for setting up HiSpark Studio. The `libburn.dll' in
     HiSpark Studio contains important routines and data structures for flashing.

  * https://gitee.com/hihope_iot/near-link/raw/master/firmware/WS63/ws63-liteos-app_all.fwpkg

    A reference firmware for fwpkg parsing and flashing. But this can't be
    flashed on Hisilicon WS63E MCU. And, `src/fwpkg.h' also documented it.
```

### 烧录

```shell
# 根据自己需要变更相关参数, 在开始烧录时需要复位芯片
ws63flash --flash /dev/ttyUSB0 output/ws63/fwpkg/ws63-liteos-app/ws63-liteos-app_all.fwpkg
```

## 查看串口打印

以 minicom 为例

```shell
# 按 Ctrl + A X 退出
minicom -D /dev/ttyUSB0 -b 115200
```